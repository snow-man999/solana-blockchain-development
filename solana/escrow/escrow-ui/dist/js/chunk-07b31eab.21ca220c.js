(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07b31eab"],{"7be9":function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return d}));a("d9e2"),a("2c66"),a("249d"),a("40e9"),a("e9f5"),a("ab43"),a("9547"),a("907a"),a("986a"),a("1d02"),a("3c5d"),a("6ce5"),a("2834"),a("4ea1");var c=a("d6e3"),s=a("64b9"),r=a("399f"),i=a.n(r),o=a("a8d6");const n=new s["b"]("http://localhost:8899","singleGossip"),d=async(t,a,r,d,l,b)=>{const u=new s["a"](t.split(",").map(e=>parseInt(e))),p=new s["c"](a),k=new s["c"](r),m=new s["c"](d),y=new s["c"](b);let A;try{A=(await n.getAccountInfo(p,"singleGossip")).data}catch(w){throw new Error("Could not find escrow at given address!")}const g=o["a"].decode(A),j={escrowAccountPubkey:p,isInitialized:!!g.isInitialized,initializerAccountPubkey:new s["c"](g.initializerPubkey),XTokenTempAccountPubkey:new s["c"](g.initializerTempTokenAccountPubkey),initializerYTokenAccount:new s["c"](g.initializerReceivingTokenAccountPubkey),expectedAmount:new i.a(g.expectedAmount,10,"le")},O=await s["c"].findProgramAddress([e.from("escrow")],y),f=new s["g"]({programId:y,data:e.from(Uint8Array.of(1,...new i.a(l).toArray("le",8))),keys:[{pubkey:u.publicKey,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:j.XTokenTempAccountPubkey,isSigner:!1,isWritable:!0},{pubkey:j.initializerAccountPubkey,isSigner:!1,isWritable:!0},{pubkey:j.initializerYTokenAccount,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:c["c"],isSigner:!1,isWritable:!1},{pubkey:O[0],isSigner:!1,isWritable:!1}]});await n.sendTransaction((new s["f"]).add(f),[u],{skipPreflight:!1,preflightCommitment:"singleGossip"})}}).call(this,a("1c35").Buffer)},8511:function(e,t,a){"use strict";a.r(t);var c=a("7a23");const s={class:"bg"},r={class:"mb-1"},i=["disabled"],o={class:"mb-1"},n=["disabled"],d={class:"mb-1"},l=["disabled"],b={class:"mb-1"},u=["disabled"],p={class:"mb-1"},k=["disabled"],m={class:"mb-1"},y=["disabled"],A={class:"mb-1"},g=["disabled"],j=["disabled"],O={key:0,style:{"margin-left":"10px"}},f={key:0,class:"mb-1 error-message"},w={key:1,class:"mb-1 success-message"};function v(e,t,a,v,T,h){return Object(c["p"])(),Object(c["d"])("div",s,[t[14]||(t[14]=Object(c["e"])("p",{class:"title"},"Escrow UI - Bob's Trade Interface",-1)),Object(c["e"])("div",null,[Object(c["e"])("div",r,[t[8]||(t[8]=Object(c["e"])("label",{for:"private-key"},"Throwaway private key (as byte array from sollet.io, without the '[]')",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"text",id:"private-key","onUpdate:modelValue":t[0]||(t[0]=t=>e.formState.privateKey=t),placeholder:"e.g. 1,2,3,...",disabled:e.loading},null,8,i),[[c["y"],e.formState.privateKey]])]),Object(c["e"])("div",o,[t[9]||(t[9]=Object(c["e"])("label",{for:"program-id"},"Program id",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"text",id:"program-id","onUpdate:modelValue":t[1]||(t[1]=t=>e.formState.programId=t),placeholder:"Program ID",disabled:e.loading},null,8,n),[[c["y"],e.formState.programId]])]),Object(c["e"])("div",d,[t[10]||(t[10]=Object(c["e"])("label",{for:"taker-x-acc"},"Bob's X token account pubkey",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"text",id:"taker-x-acc","onUpdate:modelValue":t[2]||(t[2]=t=>e.formState.takerXAccAddress=t),placeholder:"X Token Account Pubkey",disabled:e.loading},null,8,l),[[c["y"],e.formState.takerXAccAddress]])]),Object(c["e"])("div",b,[t[11]||(t[11]=Object(c["e"])("label",{for:"taker-y-acc"},"Bob's Y token account pubkey",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"text",id:"taker-y-acc","onUpdate:modelValue":t[3]||(t[3]=t=>e.formState.takerYAccAddress=t),placeholder:"Y Token Account Pubkey",disabled:e.loading},null,8,u),[[c["y"],e.formState.takerYAccAddress]])]),Object(c["e"])("div",p,[t[12]||(t[12]=Object(c["e"])("label",{for:"escrow-acc"},"Escrow account pubkey",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"text",id:"escrow-acc","onUpdate:modelValue":t[4]||(t[4]=t=>e.formState.escrowAccAddress=t),placeholder:"Escrow Account Pubkey",disabled:e.loading},null,8,k),[[c["y"],e.formState.escrowAccAddress]])]),Object(c["e"])("div",m,[t[13]||(t[13]=Object(c["e"])("label",{for:"x-token-amount"},"Amount X tokens Bob wants",-1)),Object(c["B"])(Object(c["e"])("input",{class:"display-block",type:"number",id:"x-token-amount","onUpdate:modelValue":t[5]||(t[5]=t=>e.formState.XTokenExpectedAmount=t),placeholder:"Amount expected",min:"0",disabled:e.loading},null,8,y),[[c["y"],e.formState.XTokenExpectedAmount]])]),Object(c["e"])("div",A,[Object(c["e"])("input",{style:{"margin-right":"5px"},class:"cursor-pointer border-none bg-btn normal-font-size",type:"button",value:"Reset UI",onClick:t[6]||(t[6]=(...t)=>e.resetUI&&e.resetUI(...t)),disabled:e.loading},null,8,g),Object(c["e"])("input",{class:"cursor-pointer border-none bg-btn normal-font-size",type:"button",value:"Take trade",onClick:t[7]||(t[7]=(...t)=>e.onTakeTrade&&e.onTakeTrade(...t)),disabled:!e.isFormValid||e.loading},null,8,j),e.loading?(Object(c["p"])(),Object(c["d"])("span",O,"Processing trade...")):Object(c["c"])("",!0)]),e.errorMessage?(Object(c["p"])(),Object(c["d"])("div",f,Object(c["w"])(e.errorMessage),1)):Object(c["c"])("",!0),e.successMessage?(Object(c["p"])(),Object(c["d"])("div",w,Object(c["w"])(e.successMessage),1)):Object(c["c"])("",!0)])])}a("d9e2");var T=a("7be9"),h=Object(c["h"])({setup(){const e=Object(c["r"])({privateKey:"",programId:"",takerXAccAddress:"",takerYAccAddress:"",escrowAccAddress:"",XTokenExpectedAmount:0}),t=Object(c["s"])(!1),a=Object(c["s"])(""),s=Object(c["s"])(""),r=Object(c["a"])(()=>""!==e.privateKey.trim()&&""!==e.programId.trim()&&""!==e.takerXAccAddress.trim()&&""!==e.takerYAccAddress.trim()&&""!==e.escrowAccAddress.trim()&&e.XTokenExpectedAmount>0),i=()=>{e.privateKey="",e.programId="",e.takerXAccAddress="",e.takerYAccAddress="",e.escrowAccAddress="",e.XTokenExpectedAmount=0,a.value="",s.value=""},o=async()=>{if(r.value){t.value=!0,a.value="",s.value="";try{await Object(T["a"])(e.privateKey,e.escrowAccAddress,e.takerXAccAddress,e.takerYAccAddress,e.XTokenExpectedAmount,e.programId),s.value="Success! Alice and Bob have traded their tokens and all temporary accounts have been closed"}catch(c){c instanceof Error?a.value=c.message:a.value=String(c)}finally{t.value=!1}}else a.value="Please fill in all fields with valid values."};return{formState:e,resetUI:i,onTakeTrade:o,loading:t,errorMessage:a,successMessage:s,isFormValid:r}}}),S=a("6b0d"),x=a.n(S);const I=x()(h,[["render",v]]);t["default"]=I}}]);
//# sourceMappingURL=chunk-07b31eab.21ca220c.js.map